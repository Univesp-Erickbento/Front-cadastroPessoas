<div class="form-container">
  <h2 class="title">Cadastro de Endereço</h2>

  <form [formGroup]="enderecoForm" (ngSubmit)="onSubmit()">

    <!-- Nome -->
    <mat-form-field appearance="outline">
      <mat-label>Nome</mat-label>
      <input matInput formControlName="nome" readonly />
    </mat-form-field>

    <!-- CPF, PessoaId e Botão -->
    <div class="linha-pessoa">
      <mat-form-field appearance="outline">
        <mat-label>CPF</mat-label>
        <input
          matInput
          formControlName="cpf"
          maxlength="14"
          placeholder="000.000.000-00"
          (input)="formatarCpf($event)">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>PessoaId</mat-label>
        <input matInput formControlName="pessoaId" readonly />
      </mat-form-field>

      <button
        mat-raised-button
        color="accent"
        type="button"
        (click)="pesquisarPessoa()"
        matTooltip="Pesquisar Pessoa"
        class="btn-pesquisar">
        Pesquisar Pessoa
      </button>
    </div>

    <!-- CEP -->
    <mat-form-field appearance="outline">
      <mat-label>CEP</mat-label>
      <input matInput formControlName="cep" (input)="formatarCep()" (blur)="buscarEnderecoPorCep()" />
      <mat-error *ngIf="campoInvalido('cep')">CEP é obrigatório.</mat-error>
      <mat-error *ngIf="enderecoForm.get('cep')?.hasError('pattern')">Formato de CEP inválido.</mat-error>
    </mat-form-field>
    
    <!-- Logradouro -->
    <mat-form-field appearance="outline">
      <mat-label>Logradouro</mat-label>
      <input matInput formControlName="logradouro" required>
    </mat-form-field>

    <!-- Complemento e Número -->
    <div class="form-group-row">
      <mat-form-field appearance="outline">
        <mat-label>Complemento</mat-label>
        <input matInput formControlName="complemento">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Número</mat-label>
        <input matInput formControlName="numero" required>
      </mat-form-field>
    </div>

    <!-- Bairro e Localidade -->
    <div class="form-group-row">
      <mat-form-field appearance="outline">
        <mat-label>Bairro</mat-label>
        <input matInput formControlName="bairro" required>
      </mat-form-field>
     
      <mat-form-field appearance="outline">
        <mat-label>Localidade</mat-label>
        <input matInput formControlName="localidade" required>
      </mat-form-field>
    </div>

    <!-- Estado e País -->
    <div class="form-group-row">
      <mat-form-field appearance="outline">
        <mat-label>Estado</mat-label>
        <input matInput formControlName="estado" required>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>País</mat-label>
        <input matInput formControlName="pais" required>
      </mat-form-field>
    </div>

    <!-- Perfil e Tipo de Endereço -->
    <div class="form-group-row">
      <mat-form-field appearance="outline">
        <mat-label>Perfil</mat-label>
        <mat-select formControlName="perfil" required>
          <mat-option value="">Selecione</mat-option>
          <mat-option value="Funcionario">Funcionário</mat-option>
          <mat-option value="Cliente">Cliente</mat-option>
        </mat-select>
        <mat-error *ngIf="campoInvalido('perfil')">
          Perfil é obrigatório.
        </mat-error>
      </mat-form-field>
  
      <mat-form-field appearance="outline">
        <mat-label>Tipo de Endereço</mat-label>
        <mat-select formControlName="tipoDeEndereco" required>
          <mat-option value="">Selecione</mat-option>
          <mat-option value="Residencial">Residencial</mat-option>
          <mat-option value="Comercial">Comercial</mat-option>
        </mat-select>
        <mat-error *ngIf="campoInvalido('tipoDeEndereco')">
          Tipo é obrigatório.
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Botões -->
    <div class="button-container">
      <button mat-raised-button color="warn" type="button" (click)="navegarParaLista()" class="action-btn">
        Voltar
      </button>

      <button mat-raised-button color="primary" class="action-btn" type="submit">
        Próximo
      </button>
    </div>
  </form>
</div>
